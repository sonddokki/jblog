<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="blog">

	<!-- 쿼리문 작성 -->
	
	<insert id="blogInsert" parameterType="com.javaex.vo.BlogVo">  
		 <![CDATA[
	     INSERT INTO blog
	     VALUES ( #{id}
	             ,#{blogTitle}
	             ,#{logoFile} )
		 ]]>
	</insert>
	
	<select id="blogSelect" parameterType="String"
	                        resultType="com.javaex.vo.BlogVo" >  
		  <![CDATA[        
		    SELECT b.id
			      ,u.username
			      ,b.blogtitle
			      ,b.logofile    
			FROM users u, blog b
			where u.id = b.id
			and b.id = #{id}
		 ]]>
	</select>

	<update id="blogUpdate" parameterType="com.javaex.vo.BlogVo">  
		  <![CDATA[        
		    UPDATE blog
			set blogTitle = #{blogTitle}
			   ,logoFile = #{logoFile}
			where id = #{id}
		 ]]>
	</update>
	
	<!-- 카테고리  -->
	
	<select id="categoryList" parameterType="String" resultType="com.javaex.vo.CategoryVo" >  
		  <![CDATA[        
		   SELECT    ctr.rn as num
			        ,ctr.cateNo
			        ,ctr.id
			        ,ctr.catename
			        ,ctr.description
			        ,ctr.regdate
			FROM  (SELECT rownum rn
			               ,ct.cateNo
			               ,ct.id
			               ,ct.catename
			               ,ct.description
			               ,ct.regdate    
			        FROM  (SELECT   c.cateNo
			                        ,c.id
			                        ,c.catename
			                        ,c.description
			                        ,c.regdate
			                FROM  blog b,category c
			                where b.id = c.id
			                and b.id = #{id}
			                ORDER BY c.cateno asc) ct) ctr
		 ]]>
	</select>
	
	
	
	
	<insert id="cateInsert" parameterType="com.javaex.vo.CategoryVo">  
		 <![CDATA[
	     INSERT INTO category
	     VALUES (seq_category_no.nextval
	     		 ,#{id}
	             ,#{cateName}
	             ,#{description}
	             ,SYSDATE )
		 ]]>
	</insert>
	
	

</mapper>
	